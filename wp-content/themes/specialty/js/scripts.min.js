jQuery(function(e){"use strict";function a(){return p.hasClass("sidebar-wrap-visible")}function t(e){e&&e.preventDefault(),p.removeClass("sidebar-wrap-visible"),l.removeClass("mm-blocking mm-front")}function i(e){e&&e.preventDefault(),p.addClass("sidebar-wrap-visible"),l.addClass("mm-blocking mm-front")}function n(){return v.hasClass("form-filter-visible")}function r(e){e&&e.preventDefault(),v.removeClass("form-filter-visible"),l.removeClass("mm-blocking mm-front")}function o(e){e&&e.preventDefault(),v.addClass("form-filter-visible"),l.addClass("mm-blocking mm-front")}var s=e(window),l=e("html"),d=e("body"),m=e(".navigation-main"),f=e("#mobilemenu");m.clone().removeAttr("id").removeClass().appendTo(f),f.find("li").removeAttr("id"),f.mmenu({offCanvas:{position:"top",zposition:"front"},autoHeight:!0,navbars:[{position:"top",content:["prev","title","close"]}]});var c=e(".sidebar-wrap-trigger"),u=e(".sidebar-wrap-dismiss"),p=e(".sidebar-wrap"),g=e(".form-filter-trigger"),b=e(".form-filter-dismiss"),v=e(".form-filter");c.on("click",i),u.on("click",t),g.on("click",o),b.on("click",r),e(document).on("keydown",function(e){e=e||window.e,27===e.keyCode&&a()&&n()&&(t(),r())}),d.on("click",function(){a()&&t(),n()&&r()}).find(".sidebar-wrap-trigger, .sidebar-wrap, .form-filter-trigger, .form-filter").on("click",function(e){e.stopPropagation()}),d.fitVids(),e(".ci-lightbox, a[data-lightbox^='gal']").magnificPopup({type:"image",mainClass:"mfp-with-zoom",gallery:{enabled:!0},zoom:{enabled:!0}});var h,_=e(".job-listing-container"),y=e(".item-listing"),C=e(".listing-filters-form"),w=e(".list-item-error"),k=e(".btn-jobs-filter"),j=e(".btn-load-jobs"),x=e(".jobs-found-no");_.on("ci.update-results",function(a,t,i){h&&h.abort(),w.is(":visible")&&w.fadeOut("fast");var n=e('input[name="job_type[]"]:checked, input[name="job_type[]"][type="hidden"], input[name="job_type"]').map(function(){return e(this).val()}).get(),r=e('input[name="salary_range[]"]:checked, input[name="salary_range[]"][type="hidden"], input[name="salary_range"]').map(function(){return e(this).val()}).get(),o=e(':input[name^="search_categories"]').map(function(){return e(this).val()}).get(),s=e('input[name="search_keywords"]').val(),l=e('input[name="search_location"]').val(),d={search_keywords:s,search_location:l,search_categories:o,filter_job_type:n,salary_range:r,per_page:_.data("per_page"),page:t,orderby:_.data("orderby"),order:_.data("order")};h=e.ajax({type:"POST",dataType:"json",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:d}).done(function(e){try{e.html&&(i?y.append(e.html):(y.html(e.html),j.data("page",1)),e.hasOwnProperty("jobs_number_found")&&x.text(e.jobs_number_found)),e.found_jobs&&e.max_num_pages!==t?j.show():j.hide()}catch(e){w.fadeIn("fast"),console.error(e)}}).fail(function(e){"abort"!==e.statusText&&w.fadeIn("fast")}).always(function(e){e&&"abort"===e.statusText||(j.removeClass("btn-loading"),k.removeClass("btn-loading"),y.removeClass("is-loading"))})}),C.on("submit",function(e){k.addClass("btn-loading"),y.addClass("is-loading"),_.triggerHandler("ci.update-results",[1,!1]),e.preventDefault()}),e(".checkbox-filter").on("change",function(e){y.addClass("is-loading"),_.triggerHandler("ci.update-results",[1,!1]),e.preventDefault()}),j.on("click",function(a){var t=e(this),i=t.data("page")||1;i+=1,t.data("page",i),t.addClass("btn-loading"),_.triggerHandler("ci.update-results",[i,!0]),a.preventDefault()}),e(".google_map_link").magnificPopup({type:"iframe"}),s.on("load",function(){s.width()>768&&p.hasClass("sidebar-fixed-default")&&p.find(".sidebar").mCustomScrollbar({theme:"minimal-dark"}),e(".row-equal").find('[class^="col"]').matchHeight()})});